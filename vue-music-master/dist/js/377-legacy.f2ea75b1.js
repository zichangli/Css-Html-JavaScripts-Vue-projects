"use strict";(self["webpackChunkmusic163_vue"]=self["webpackChunkmusic163_vue"]||[]).push([[377],{7377:function(t,e,s){s.r(e),s.d(e,{default:function(){return p}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mv-container"},[s("div",{staticClass:"mv-wrap"},[s("h3",{staticClass:"title"},[t._v("mv详情")]),s("div",{staticClass:"video-wrap"},[s("video",{attrs:{autoplay:"",controls:"",src:t.url}})]),s("div",{staticClass:"info-wrap"},[s("div",{staticClass:"singer-info"},[s("div",{staticClass:"avatar-wrap"},[s("img",{attrs:{src:t.icon,alt:""}})]),s("span",{staticClass:"name"},[t._v(t._s(t.mvInfo.artistName))])]),s("div",{staticClass:"mv-info"},[s("h2",{staticClass:"title"},[t._v(t._s(t.mvInfo.name))]),s("span",{staticClass:"date"},[t._v("发布："+t._s(t._f("filterDatas")(t.mvInfo.time)))]),s("span",{staticClass:"number",staticStyle:{"font-size":"5px"}},[t._v("播放："+t._s(t.mvInfo.playCount)+"次")]),s("p",{staticClass:"desc"},[t._v(" "+t._s(t.mvInfo.desc)+" ")])])]),s("div",{staticClass:"comment-wrap"},[s("p",{staticClass:"title"},[t._v(" 精彩评论"),s("span",{staticClass:"number"},[t._v("("+t._s(t.hotCount)+")")])]),s("div",{staticClass:"comments-wrap"},t._l(t.hotComments,(function(e,a){return s("div",{key:a,staticClass:"item"},[s("div",{staticClass:"icon-wrap"},[s("img",{attrs:{src:e.user.avatarUrl,alt:""}})]),s("div",{staticClass:"content-wrap"},[s("div",{staticClass:"content"},[s("span",{staticClass:"name"},[t._v(t._s(e.user.nickname)+"：")]),s("span",{staticClass:"comment"},[t._v(t._s(e.content))])]),0!=e.beReplied.length?s("div",{staticClass:"re-content"},[s("span",{staticClass:"name"},[t._v(t._s(e.beReplied[0].user.nickname)+"：")]),s("span",{staticClass:"comment"},[t._v(t._s(e.beReplied[0].content))])]):t._e(),s("div",{staticClass:"date"},[t._v(t._s(t._f("filterDatas")(e.time)))])])])})),0)]),s("div",{staticClass:"comment-wrap"},[s("p",{staticClass:"title"},[t._v(" 最新评论"),s("span",{staticClass:"number"},[t._v("("+t._s(t.total)+")")])]),s("div",{staticClass:"comments-wrap"},t._l(t.comments,(function(e,a){return s("div",{key:a,staticClass:"item"},[s("div",{staticClass:"icon-wrap"},[s("img",{attrs:{src:e.user.avatarUrl,alt:""}})]),s("div",{staticClass:"content-wrap"},[s("div",{staticClass:"content"},[s("span",{staticClass:"name"},[t._v(t._s(e.user.nickname)+"：")]),s("span",{staticClass:"comment"},[t._v(t._s(e.content))])]),0!=e.beReplied.length?s("div",{staticClass:"re-content"},[s("span",{staticClass:"name"},[t._v(t._s(e.beReplied[0].user.nickname)+"：")]),s("span",{staticClass:"comment"},[t._v(t._s(e.beReplied[0].content))])]):t._e(),s("div",{staticClass:"date"},[t._v(t._s(t._f("filterDatas")(e.time)))])])])})),0)]),s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.page,"page-size":5,limit:t.limit},on:{"current-change":t.handleCurrentChange}})],1),s("div",{staticClass:"mv-recommend"},[s("h3",{staticClass:"title"},[t._v("相关推荐")]),s("div",{staticClass:"mvs"},[s("div",{staticClass:"items"},t._l(t.simiMvs,(function(e,a){return s("div",{key:a,staticClass:"item"},[s("div",{staticClass:"img-wrap"},[s("img",{attrs:{src:e.cover,alt:""},on:{click:function(s){return t.playMusicMv(e.id)}}}),s("span",{staticClass:"iconfont icon-play",on:{click:function(s){return t.playMusicMv(e.id)}}},[s("i",{staticClass:"el-icon-video-play"})]),s("div",{staticClass:"num-wrap"},[s("div",{staticClass:"iconfont icon-play"}),s("div",{staticClass:"num",staticStyle:{"font-size":"5px"}},[t._v("播放:"+t._s(e.playCount)+"次")])]),s("span",{staticClass:"time"},[t._v(t._s(t._f("filterDatatime")(e.duration)))])]),s("div",{staticClass:"info-wrap"},[s("div",{staticClass:"name"},[t._v(t._s(e.name))]),s("div",{staticClass:"singer"},[t._v(t._s(e.artistName))])])])})),0)])])])},r=[],n=s(6198),i=s(3796),c=(s(5666),s(381)),o=s.n(c),u={filters:{filterDatas:function(t){return 0==t?"未获取到数据":o()(t).format("YYYY-MM-DD")},filterDatatime:function(t){return 0==t?"未获取到数据":o()(t).format("mm:ss")}},data:function(){var t;return t={total:20,page:1,limit:10,url:"",simiMvs:[],mvInfo:{},icon:"",comments:{},hotComments:{},user:{}},(0,i.Z)(t,"total",0),(0,i.Z)(t,"hotCount",0),t},created:function(){this.getMVUrl(),this.getsimimv(),this.getmvdetail(),this.getCommentmv()},methods:{getMVUrl:function(){var t=this;return(0,n.Z)(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/mv/url?id="+t.$route.query.q);case 2:if(s=e.sent,a=s.data,200===a.code){e.next=8;break}return e.abrupt("return",t.$message.error("error:获取失败 "));case 8:t.url=a.data.url;case 9:case"end":return e.stop()}}),e)})))()},getsimimv:function(){var t=this;return(0,n.Z)(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/simi/mv?mvid="+t.$route.query.q);case 2:if(s=e.sent,a=s.data,200===a.code){e.next=8;break}return e.abrupt("return",t.$message.error("error:获取失败 "));case 8:t.simiMvs=a.mvs;case 9:case"end":return e.stop()}}),e)})))()},getmvdetail:function(){var t=this;return(0,n.Z)(regeneratorRuntime.mark((function e(){var s,a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/mv/detail?mvid="+t.$route.query.q);case 2:if(s=e.sent,a=s.data,200===a.code){e.next=8;break}return e.abrupt("return",t.$message.error("error:获取失败 "));case 8:return t.mvInfo=a.data,e.next=11,t.$http.get("artists?id="+t.mvInfo.artists[0].id);case 11:r=e.sent,n=r.data,t.icon=n.artist.picUrl;case 14:case"end":return e.stop()}}),e)})))()},getCommentmv:function(){var t=this;return(0,n.Z)(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/comment/mv?id="+t.$route.query.q+"&method=10&offset=0");case 2:if(s=e.sent,a=s.data,200===a.code){e.next=8;break}return e.abrupt("return",t.$message.error("error:获取视频评论失败 "));case 8:t.comments=a.comments,t.hotComments=a.hotComments,t.hotCount=a.total,t.total=a.total;case 12:case"end":return e.stop()}}),e)})))()},playMusicMv:function(t){var e=this;return(0,n.Z)(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(""!=t){s.next=6;break}return s.next=3,e.$message.error("error:获取MV失败，请检查版权...或者网络 ");case 3:return s.abrupt("return",s.sent);case 6:return s.next=8,e.$router.push("/");case 8:return s.next=10,e.$router.push("/PlayMusicMV?q="+t);case 10:case"end":return s.stop()}}),s)})))()},handleCurrentChange:function(t){var e=this;return(0,n.Z)(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.page=t,s.next=3,e.$http.get("/comment/mv?id="+e.$route.query.q+"&limit=10&offset="+10*(e.page-1));case 3:if(a=s.sent,r=a.data,200===r.code){s.next=9;break}return s.abrupt("return",e.$message.error("error:获取页码失败请检查网络 "));case 9:e.total=r.total,e.comments=r.comments;case 11:case"end":return s.stop()}}),s)})))()}}},m=u,l=s(3736),v=(0,l.Z)(m,a,r,!1,null,null,null),p=v.exports}}]);
//# sourceMappingURL=377-legacy.f2ea75b1.js.map
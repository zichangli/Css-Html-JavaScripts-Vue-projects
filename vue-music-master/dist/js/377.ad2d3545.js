"use strict";(self["webpackChunkmusic163_vue"]=self["webpackChunkmusic163_vue"]||[]).push([[377],{7377:function(t,s,a){a.r(s),a.d(s,{default:function(){return v}});var i=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"mv-container"},[a("div",{staticClass:"mv-wrap"},[a("h3",{staticClass:"title"},[t._v("mv详情")]),a("div",{staticClass:"video-wrap"},[a("video",{attrs:{autoplay:"",controls:"",src:t.url}})]),a("div",{staticClass:"info-wrap"},[a("div",{staticClass:"singer-info"},[a("div",{staticClass:"avatar-wrap"},[a("img",{attrs:{src:t.icon,alt:""}})]),a("span",{staticClass:"name"},[t._v(t._s(t.mvInfo.artistName))])]),a("div",{staticClass:"mv-info"},[a("h2",{staticClass:"title"},[t._v(t._s(t.mvInfo.name))]),a("span",{staticClass:"date"},[t._v("发布："+t._s(t._f("filterDatas")(t.mvInfo.time)))]),a("span",{staticClass:"number",staticStyle:{"font-size":"5px"}},[t._v("播放："+t._s(t.mvInfo.playCount)+"次")]),a("p",{staticClass:"desc"},[t._v(" "+t._s(t.mvInfo.desc)+" ")])])]),a("div",{staticClass:"comment-wrap"},[a("p",{staticClass:"title"},[t._v(" 精彩评论"),a("span",{staticClass:"number"},[t._v("("+t._s(t.hotCount)+")")])]),a("div",{staticClass:"comments-wrap"},t._l(t.hotComments,(function(s,i){return a("div",{key:i,staticClass:"item"},[a("div",{staticClass:"icon-wrap"},[a("img",{attrs:{src:s.user.avatarUrl,alt:""}})]),a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"content"},[a("span",{staticClass:"name"},[t._v(t._s(s.user.nickname)+"：")]),a("span",{staticClass:"comment"},[t._v(t._s(s.content))])]),0!=s.beReplied.length?a("div",{staticClass:"re-content"},[a("span",{staticClass:"name"},[t._v(t._s(s.beReplied[0].user.nickname)+"：")]),a("span",{staticClass:"comment"},[t._v(t._s(s.beReplied[0].content))])]):t._e(),a("div",{staticClass:"date"},[t._v(t._s(t._f("filterDatas")(s.time)))])])])})),0)]),a("div",{staticClass:"comment-wrap"},[a("p",{staticClass:"title"},[t._v(" 最新评论"),a("span",{staticClass:"number"},[t._v("("+t._s(t.total)+")")])]),a("div",{staticClass:"comments-wrap"},t._l(t.comments,(function(s,i){return a("div",{key:i,staticClass:"item"},[a("div",{staticClass:"icon-wrap"},[a("img",{attrs:{src:s.user.avatarUrl,alt:""}})]),a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"content"},[a("span",{staticClass:"name"},[t._v(t._s(s.user.nickname)+"：")]),a("span",{staticClass:"comment"},[t._v(t._s(s.content))])]),0!=s.beReplied.length?a("div",{staticClass:"re-content"},[a("span",{staticClass:"name"},[t._v(t._s(s.beReplied[0].user.nickname)+"：")]),a("span",{staticClass:"comment"},[t._v(t._s(s.beReplied[0].content))])]):t._e(),a("div",{staticClass:"date"},[t._v(t._s(t._f("filterDatas")(s.time)))])])])})),0)]),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.page,"page-size":5,limit:t.limit},on:{"current-change":t.handleCurrentChange}})],1),a("div",{staticClass:"mv-recommend"},[a("h3",{staticClass:"title"},[t._v("相关推荐")]),a("div",{staticClass:"mvs"},[a("div",{staticClass:"items"},t._l(t.simiMvs,(function(s,i){return a("div",{key:i,staticClass:"item"},[a("div",{staticClass:"img-wrap"},[a("img",{attrs:{src:s.cover,alt:""},on:{click:function(a){return t.playMusicMv(s.id)}}}),a("span",{staticClass:"iconfont icon-play",on:{click:function(a){return t.playMusicMv(s.id)}}},[a("i",{staticClass:"el-icon-video-play"})]),a("div",{staticClass:"num-wrap"},[a("div",{staticClass:"iconfont icon-play"}),a("div",{staticClass:"num",staticStyle:{"font-size":"5px"}},[t._v("播放:"+t._s(s.playCount)+"次")])]),a("span",{staticClass:"time"},[t._v(t._s(t._f("filterDatatime")(s.duration)))])]),a("div",{staticClass:"info-wrap"},[a("div",{staticClass:"name"},[t._v(t._s(s.name))]),a("div",{staticClass:"singer"},[t._v(t._s(s.artistName))])])])})),0)])])])},e=[],n=a(381),r=a.n(n),c={filters:{filterDatas(t){return 0==t?"未获取到数据":r()(t).format("YYYY-MM-DD")},filterDatatime(t){return 0==t?"未获取到数据":r()(t).format("mm:ss")}},data(){return{total:20,page:1,limit:10,url:"",simiMvs:[],mvInfo:{},icon:"",comments:{},hotComments:{},user:{},total:0,hotCount:0}},created(){this.getMVUrl(),this.getsimimv(),this.getmvdetail(),this.getCommentmv()},methods:{async getMVUrl(){const{data:t}=await this.$http.get("/mv/url?id="+this.$route.query.q);if(200!==t.code)return this.$message.error("error:获取失败 ");this.url=t.data.url},async getsimimv(){const{data:t}=await this.$http.get("/simi/mv?mvid="+this.$route.query.q);if(200!==t.code)return this.$message.error("error:获取失败 ");this.simiMvs=t.mvs},async getmvdetail(){const{data:t}=await this.$http.get("/mv/detail?mvid="+this.$route.query.q);if(200!==t.code)return this.$message.error("error:获取失败 ");{this.mvInfo=t.data;const{data:s}=await this.$http.get("artists?id="+this.mvInfo.artists[0].id);this.icon=s.artist.picUrl}},async getCommentmv(){const{data:t}=await this.$http.get("/comment/mv?id="+this.$route.query.q+"&method=10&offset=0");if(200!==t.code)return this.$message.error("error:获取视频评论失败 ");this.comments=t.comments,this.hotComments=t.hotComments,this.hotCount=t.total,this.total=t.total},async playMusicMv(t){if(""==t)return await this.$message.error("error:获取MV失败，请检查版权...或者网络 ");await this.$router.push("/"),await this.$router.push("/PlayMusicMV?q="+t)},async handleCurrentChange(t){this.page=t;const{data:s}=await this.$http.get("/comment/mv?id="+this.$route.query.q+"&limit=10&offset="+10*(this.page-1));if(200!==s.code)return this.$message.error("error:获取页码失败请检查网络 ");this.total=s.total,this.comments=s.comments}}},l=c,o=a(3736),m=(0,o.Z)(l,i,e,!1,null,null,null),v=m.exports}}]);
//# sourceMappingURL=377.ad2d3545.js.map